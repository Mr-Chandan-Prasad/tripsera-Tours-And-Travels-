import{j as e,L as X}from"./index-B6nm7sb2.js";import{r as g}from"./vendor-wpXbf5jk.js";import{u as G,a as le}from"./useSupabase-CwF1FWV7.js";import{j as ie,E as ce,X as D,i as O,k as Y,l as oe,m as de,n as F,W as me,B as xe,o as K,Q as J,p as ge,q as H,r as ue,a as he,C as pe,U as fe}from"./ui-BrVeeXSi.js";import{P as Q,a as be}from"./paymentService-Bxtg_vey.js";import{T as je}from"./TicketGenerator-DM_7W7F-.js";import{b as ye,u as Ne}from"./router-DXsjaEeh.js";const Z=({onImageUpload:m,maxSize:j=20,accept:u="image/*",className:d="",multiple:v=!1})=>{const[t,o]=g.useState(!1),[y,_]=g.useState(!1),[x,N]=g.useState(""),[P,b]=g.useState(""),h=g.useRef(null),S=n=>{if(!n.type.startsWith("image/"))return"Please select a valid image file";const C=j*1024*1024;return n.size>C?`File size must be less than ${j}MB`:["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(n.type)?null:"Supported formats: JPG, PNG, WEBP, GIF"},c=n=>new Promise((C,I)=>{const i=document.createElement("canvas"),p=i.getContext("2d"),w=new Image;w.onload=()=>{let{width:M,height:E}=w;const R=1920,U=1080;if(M>R||E>U){const q=Math.min(R/M,U/E);M*=q,E*=q}i.width=M,i.height=E,p==null||p.drawImage(w,0,0,M,E);const $=n.size>5*1024*1024?.7:.9,z=i.toDataURL("image/jpeg",$);C(z)},w.onerror=()=>I(new Error("Failed to load image")),w.src=URL.createObjectURL(n)}),a=async n=>{b(""),_(!0);try{const C=S(n);if(C){b(C),_(!1);return}let I;n.size>2*1024*1024?I=await c(n):I=await new Promise((i,p)=>{const w=new FileReader;w.onload=()=>i(w.result),w.onerror=()=>p(new Error("Failed to read file")),w.readAsDataURL(n)}),N(I),m(I)}catch(C){b("Failed to process image. Please try again."),console.error("Image upload error:",C)}finally{_(!1)}},l=n=>{n.preventDefault(),n.stopPropagation(),n.type==="dragenter"||n.type==="dragover"?o(!0):n.type==="dragleave"&&o(!1)},f=n=>{n.preventDefault(),n.stopPropagation(),o(!1),n.dataTransfer.files&&n.dataTransfer.files[0]&&a(n.dataTransfer.files[0])},A=n=>{n.preventDefault(),n.target.files&&n.target.files[0]&&a(n.target.files[0])},k=()=>{var n;(n=h.current)==null||n.click()},T=()=>{N(""),b(""),m(""),h.current&&(h.current.value="")};return e.jsxs("div",{className:`w-full ${d}`,children:[e.jsx("input",{ref:h,type:"file",accept:u,multiple:v,onChange:A,className:"hidden"}),x?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative border-2 border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("img",{src:x,alt:"Preview",className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center opacity-0 hover:opacity-100",children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),window.open(x,"_blank")},className:"bg-white text-gray-800 p-2 rounded-full hover:bg-gray-100 transition-colors mr-2",children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),T()},className:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors",children:e.jsx(D,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Image uploaded successfully"})]}),e.jsx("button",{onClick:k,className:"text-sm text-orange-600 hover:text-orange-700",children:"Change"})]})]}):e.jsx("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all duration-300 ${t?"border-orange-500 bg-orange-50":P?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,onDragEnter:l,onDragLeave:l,onDragOver:l,onDrop:f,onClick:k,children:y?e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Processing image..."})]}):e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(ie,{className:`w-8 h-8 ${P?"text-red-400":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Click to upload or drag and drop"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["JPG, PNG, WEBP up to ",j,"MB"]})]})]})}),P&&e.jsxs("div",{className:"mt-2 flex items-center space-x-1 text-red-600",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:P})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[e.jsx("p",{children:"• Supported formats: JPG, PNG, WEBP, GIF"}),e.jsxs("p",{children:["• Maximum file size: ",j,"MB"]}),e.jsx("p",{children:"• Images will be automatically compressed if needed"})]})]})},ve=({isOpen:m,onClose:j,paymentDetails:u,onPaymentSuccess:d,onPaymentError:v})=>{const[t,o]=g.useState(""),[y,_]=g.useState(!1),[x,N]=g.useState("idle"),[P,b]=g.useState("");g.useEffect(()=>{m&&(o(""),_(!1),N("idle"),b(""))},[m]);const h=async()=>{if(!t){b("Please select a payment method");return}_(!0),N("processing"),b("");try{const c=await Q.processPayment(t,u);c.success?(N("success"),setTimeout(()=>{d(c),j()},2e3)):(N("error"),b(c.error||c.message||"Payment failed"),v(c.error||c.message||"Payment failed"))}catch(c){N("error");const a=c instanceof Error?c.message:"Payment failed";b(a),v(a)}finally{_(!1)}},S=c=>{switch(c.id){case"razorpay":return e.jsx(F,{className:"w-6 h-6"});case"stripe":return e.jsx(F,{className:"w-6 h-6"});case"upi":return e.jsx(K,{className:"w-6 h-6"});case"netbanking":return e.jsx(xe,{className:"w-6 h-6"});case"wallet":return e.jsx(me,{className:"w-6 h-6"});default:return e.jsx(F,{className:"w-6 h-6"})}};return m?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto animate-bounce-in",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 font-poppins",children:"Payment"}),e.jsx("button",{onClick:j,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",disabled:y,children:e.jsx(D,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2 font-poppins",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:Q.formatAmount(u.amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Description:"}),e.jsx("span",{className:"text-gray-800",children:u.description})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"text-gray-800",children:u.customerName})]})]})]})}),x==="processing"&&e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(oe,{className:"w-6 h-6 animate-spin text-orange-500"}),e.jsx("span",{className:"text-gray-700 font-inter",children:"Processing payment..."})]})}),x==="success"&&e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3 text-green-600",children:[e.jsx(de,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold font-inter",children:"Payment Successful!"})]})}),x==="error"&&e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 text-red-600",children:[e.jsx(Y,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold font-inter",children:"Payment Failed"})]}),P&&e.jsx("p",{className:"text-red-600 text-sm mt-2 text-center",children:P})]}),x==="idle"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4 font-poppins",children:"Select Payment Method"}),e.jsx("div",{className:"space-y-3",children:be.methods.filter(c=>c.enabled).map(c=>e.jsx("button",{onClick:()=>o(c.id),className:`w-full p-4 rounded-lg border-2 transition-all duration-300 ${t===c.id?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${t===c.id?"bg-orange-500 text-white":"bg-gray-100 text-gray-600"}`,children:S(c)}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-semibold text-gray-800 font-inter",children:c.name}),e.jsx("div",{className:"text-sm text-gray-600 font-inter",children:c.description})]}),e.jsx("div",{className:"text-2xl",children:c.icon})]})},c.id))}),P&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600 text-sm font-inter",children:P})})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200",children:[x==="idle"&&e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:j,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-300 font-inter",children:"Cancel"}),e.jsx("button",{onClick:h,disabled:!t||y,className:"flex-1 btn-primary font-poppins disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Processing...":"Pay Now"})]}),x==="error"&&e.jsx("button",{onClick:()=>{N("idle"),b("")},className:"w-full btn-primary font-poppins",children:"Try Again"})]})]})}):null},we=({bookingData:m,onSuccess:j,onCancel:u})=>{const[d,v]=g.useState("gateway"),[t,o]=g.useState("idle"),[y,_]=g.useState(""),[x,N]=g.useState(""),[P,b]=g.useState(!1),[h,S]=g.useState({number:"",expiry:"",cvv:"",name:""}),[c,a]=g.useState(""),[l,f]=g.useState({}),A=localStorage.getItem("paymentQrCodeData")||"",k=()=>{const i={};return d==="card"&&((!h.number||h.number.length<16)&&(i.cardNumber="Invalid card number"),(!h.expiry||!/^\d{2}\/\d{2}$/.test(h.expiry))&&(i.expiry="Invalid expiry date (MM/YY)"),(!h.cvv||h.cvv.length<3)&&(i.cvv="Invalid CVV"),(!h.name||h.name.length<2)&&(i.name="Invalid cardholder name")),d==="upi"&&(!c||!c.includes("@"))&&(i.upiId="Invalid UPI ID"),f(i),Object.keys(i).length===0},T=async()=>{if(d==="gateway"){b(!0);return}if(k()){o("processing");try{await new Promise(w=>setTimeout(w,5e3));const i=`TXN${Date.now()}${Math.random().toString(36).substr(2,9).toUpperCase()}`;N(i);let p=!1;d==="qr"&&y?p=!0:d==="upi"&&c&&c.includes("@")?p=Math.random()>.2:d==="card"&&h.number.length>=16?p=Math.random()>.15:p=!1,p?(o("success"),setTimeout(()=>{j({method:d,transactionId:i,amount:m.total_amount,paymentProof:y,paymentValidated:!0,timestamp:new Date().toISOString()})},2e3)):o("failed")}catch{o("failed")}}},n=i=>{o("success"),N(i.transactionId||i.paymentId||""),setTimeout(()=>{j({method:"gateway",transactionId:i.transactionId||i.paymentId||"",amount:m.total_amount,paymentProof:"",paymentValidated:!0,timestamp:new Date().toISOString(),gatewayResponse:i})},2e3)},C=i=>{o("failed"),f({gateway:i})},I=()=>t==="processing"?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{size:"lg",className:"mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Processing Payment..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we process your payment securely."})]}):t==="success"?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(O,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Payment Successful!"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Transaction ID: ",x]}),e.jsx("p",{className:"text-gray-600",children:"Redirecting to your ticket..."})]}):t==="failed"?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(D,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-red-800 mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There was an issue processing your payment."}),e.jsx("button",{onClick:()=>o("idle"),className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Try Again"})]}):null;return t!=="idle"?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:I()})}):e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Secure Payment"}),e.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700",children:e.jsx(D,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600",children:["Booking ID: ",m.id]}),e.jsxs("p",{className:"text-gray-600",children:["Customer: ",m.customer_name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-teal-600",children:["₹",m.total_amount.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Select Payment Method"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:()=>v("gateway"),className:`p-4 rounded-lg border-2 transition-all ${d==="gateway"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(F,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Payment Gateway"}),e.jsx("span",{className:"text-xs text-gray-500 block mt-1",children:"Razorpay, Stripe"})]}),e.jsxs("button",{onClick:()=>v("qr"),className:`p-4 rounded-lg border-2 transition-all ${d==="qr"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(J,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"QR Code"}),e.jsx("span",{className:"text-xs text-gray-500 block mt-1",children:"Scan & Pay"})]}),e.jsxs("button",{onClick:()=>v("upi"),className:`p-4 rounded-lg border-2 transition-all ${d==="upi"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(K,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"UPI"}),e.jsx("span",{className:"text-xs text-gray-500 block mt-1",children:"UPI ID"})]}),e.jsxs("button",{onClick:()=>v("card"),className:`p-4 rounded-lg border-2 transition-all ${d==="card"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(F,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Card"}),e.jsx("span",{className:"text-xs text-gray-500 block mt-1",children:"Debit/Credit"})]})]})]}),d==="qr"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"text-center",children:[A?e.jsx("div",{className:"w-64 h-64 mx-auto mb-4",children:e.jsx("img",{src:A,alt:"Payment QR Code",className:"w-full h-full object-contain rounded-lg border-2 border-gray-200"})}):e.jsx("div",{className:"w-64 h-64 bg-gray-100 rounded-lg mx-auto mb-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"w-24 h-24 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"QR Code not available"})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Scan QR code with any UPI app to pay"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Y,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Payment Instructions:"}),e.jsxs("ol",{className:"text-sm text-blue-700 mt-1 list-decimal list-inside space-y-1",children:[e.jsx("li",{children:"Scan the QR code using any UPI app"}),e.jsxs("li",{children:["Enter the amount: ₹",m.total_amount.toLocaleString()]}),e.jsx("li",{children:"Complete the payment"}),e.jsx("li",{children:"Upload payment screenshot below (optional)"})]})]})]})})]})}),d==="upi"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UPI ID"}),e.jsx("input",{type:"text",value:c,onChange:i=>a(i.target.value),placeholder:"yourname@upi",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),l.upiId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.upiId})]}),d==="card"&&e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),e.jsx("input",{type:"text",value:h.number,onChange:i=>S(p=>({...p,number:i.target.value.replace(/\D/g,"").slice(0,16)})),placeholder:"1234 5678 9012 3456",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),l.cardNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.cardNumber})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry (MM/YY)"}),e.jsx("input",{type:"text",value:h.expiry,onChange:i=>{let p=i.target.value.replace(/\D/g,"");p.length>=2&&(p=p.slice(0,2)+"/"+p.slice(2,4)),S(w=>({...w,expiry:p}))},placeholder:"MM/YY",maxLength:5,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),l.expiry&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.expiry})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV"}),e.jsx("input",{type:"text",value:h.cvv,onChange:i=>S(p=>({...p,cvv:i.target.value.replace(/\D/g,"").slice(0,4)})),placeholder:"123",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),l.cvv&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.cvv})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name"}),e.jsx("input",{type:"text",value:h.name,onChange:i=>S(p=>({...p,name:i.target.value})),placeholder:"John Doe",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),l.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.name})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Payment Proof (Optional)"}),e.jsx(Z,{onImageUpload:_,maxSize:20,className:"w-full",accept:"image/*"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a screenshot of your payment confirmation for faster verification"})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(O,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-800 font-medium",children:"Secure Payment"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Your payment information is encrypted and secure. We use industry-standard security measures."})]})]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:u,className:"flex-1 bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:T,className:"flex-1 bg-gradient-to-r from-orange-500 to-yellow-500 text-white py-3 px-6 rounded-lg hover:from-orange-600 hover:to-yellow-600 transition-all duration-300 hover:scale-105 hover:shadow-lg flex items-center justify-center space-x-2",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsxs("span",{children:["Pay ₹",m.total_amount.toLocaleString()]})]})]})]}),e.jsx(ve,{isOpen:P,onClose:()=>b(!1),paymentDetails:{amount:m.total_amount,currency:"INR",orderId:Q.generateOrderId(),customerId:m.customer_name,customerName:m.customer_name,customerEmail:m.email,customerPhone:m.phone,description:`Booking for ${m.destination_id?"Destination":"Service"}`,bookingId:m.id},onPaymentSuccess:n,onPaymentError:C})]})},Pe=({onAddOnsChange:m,selectedDestination:j})=>{const[u,d]=g.useState([]),[v,t]=g.useState("all");g.useState(null);const{data:o=[],loading:y}=G("addons","*"),_=o.filter(a=>{const l=v==="all"||a.category===v,f=a.is_active;return l&&f}),x=["all",...Array.from(new Set(o.map(a=>a.category)))],N=u.reduce((a,l)=>a+(parseFloat(l.totalPrice)||0),0);g.useEffect(()=>{m(u,N)},[u,N,m]);const P=a=>{const l=u.findIndex(f=>f.addon.id===a.id);if(l>=0){const f=u.filter((A,k)=>k!==l);d(f)}else{const f={addon:a,quantity:1,totalPrice:parseFloat(a.price)||0};d([...u,f])}},b=(a,l)=>{if(l<1)return;const f=o.find(k=>k.id===a);if(!f)return;const A=u.map(k=>{if(k.addon.id===a){const T=Math.min(l,f.max_quantity);return{...k,quantity:T,totalPrice:(parseFloat(f.price)||0)*T}}return k});d(A)},h=a=>u.some(l=>l.addon.id===a),S=a=>{const l=u.find(f=>f.addon.id===a);return l?l.quantity:0},c=a=>{switch(a){case"transportation":return"🚗";case"insurance":return"🛡️";case"photography":return"📸";case"guide":return"🗺️";case"wellness":return"🧘";case"adventure":return"🏔️";case"accommodation":return"🏨";case"culture":return"🎭";case"connectivity":return"📶";case"dining":return"🍽️";default:return"✨"}};return y?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading add-ons..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2 font-poppins",children:"Enhance Your Trip"}),e.jsx("p",{className:"text-gray-600 font-inter",children:"Add extra services and experiences to make your journey unforgettable"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:x.map(a=>e.jsx("button",{onClick:()=>t(a),className:`px-4 py-2 rounded-full font-inter transition-all duration-300 ${v===a?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:a==="all"?"All Categories":e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:c(a)}),e.jsx("span",{className:"capitalize",children:a})]})},a))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(a=>e.jsxs("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl ${h(a.id)?"ring-2 ring-orange-500":""}`,children:[e.jsxs("div",{className:"relative h-48",children:[e.jsx("img",{src:a.image_url||"https://images.pexels.com/photos/1371360/pexels-photo-1371360.jpeg?auto=compress&cs=tinysrgb&w=400",alt:a.name,className:"w-full h-full object-cover",onError:l=>{l.currentTarget.src="https://images.pexels.com/photos/1371360/pexels-photo-1371360.jpeg?auto=compress&cs=tinysrgb&w=400"}}),e.jsx("div",{className:"absolute top-3 left-3 bg-white/90 backdrop-blur-sm rounded-full px-3 py-1",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-800 flex items-center space-x-1",children:[e.jsx("span",{children:c(a.category)}),e.jsx("span",{className:"capitalize",children:a.category})]})}),h(a.id)&&e.jsx("div",{className:"absolute top-3 right-3 bg-orange-500 text-white rounded-full p-2",children:e.jsx(O,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 font-poppins",children:a.name}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-500 font-poppins",children:["₹",a.price.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-500 font-inter",children:"per item"})]})]}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2 font-inter",children:a.description}),h(a.id)&&e.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-orange-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 font-inter",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>b(a.id,S(a.id)-1),className:"w-8 h-8 rounded-full bg-orange-500 text-white flex items-center justify-center hover:bg-orange-600 transition-colors",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-semibold text-gray-800",children:S(a.id)}),e.jsx("button",{onClick:()=>b(a.id,S(a.id)+1),disabled:S(a.id)>=a.max_quantity,className:"w-8 h-8 rounded-full bg-orange-500 text-white flex items-center justify-center hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(H,{className:"w-4 h-4"})})]})]}),a.max_quantity>1&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Max ",a.max_quantity," per booking"]})]}),e.jsx("button",{onClick:()=>P(a),className:`w-full py-3 px-4 rounded-lg font-semibold transition-all duration-300 ${h(a.id)?"bg-red-500 text-white hover:bg-red-600":"bg-orange-500 text-white hover:bg-orange-600"}`,children:h(a.id)?e.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:"Remove"})]}):e.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:"Add to Trip"})]})})]})]},a.id))}),u.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 font-poppins",children:"Selected Add-ons"}),e.jsx("div",{className:"space-y-3",children:u.map(a=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:c(a.addon.category)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800 font-inter",children:a.addon.name}),e.jsxs("div",{className:"text-sm text-gray-500 font-inter",children:[a.quantity," × ₹",a.addon.price.toLocaleString()]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"font-bold text-orange-500 font-poppins",children:["₹",a.totalPrice.toLocaleString()]})})]},a.addon.id))}),e.jsx("div",{className:"border-t border-orange-200 mt-4 pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800 font-inter",children:"Total Add-ons:"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-500 font-poppins",children:["₹",N.toLocaleString()]})]})})]}),_.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎁"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No add-ons available"}),e.jsx("p",{className:"text-gray-500",children:"Check back later for exciting add-on services!"})]})]})},Se=({preSelectedDestination:m,preSelectedService:j})=>{const u=ye(),[d,v]=g.useState(1),[t,o]=g.useState({customer_name:"",email:"",mobile:"",address:"",destination_id:"",service_id:"",booking_date:"",details:"",seats_selected:1,total_amount:0,addons_total:0,base_amount:0,payment_status:"pending"}),[y,_]=g.useState([]),[x,N]=g.useState({}),[P,b]=g.useState(!1),[h,S]=g.useState(!1),[c,a]=g.useState(!1),{data:l}=G("destinations","*"),{data:f}=G("services","*"),{insert:A,update:k,loading:T}=le();g.useEffect(()=>{if(m){const s=l.find(r=>r.name===m);s&&o(r=>({...r,destination_id:s.id}))}if(j){const s=f.find(r=>r.name===j);s&&o(r=>({...r,service_id:s.id}))}},[m,j,l,f]),g.useEffect(()=>{const s=l.find(L=>L.id===t.destination_id),r=f.find(L=>L.id===t.service_id),B=parseFloat(s==null?void 0:s.price)||0,ae=parseFloat(r==null?void 0:r.price)||0,V=(B+ae)*t.seats_selected,W=y.reduce((L,ne)=>L+(parseFloat(ne.totalPrice)||0),0),re=V+W;o(L=>({...L,total_amount:re,addons_total:W,base_amount:V}))},[t.destination_id,t.service_id,t.seats_selected,y,l,f]);const n=(s,r)=>{_(s)},C=()=>{setTimeout(()=>{const s=Math.random()<.5?"/":"/gallery";u(s)},2e3)},I=()=>{u("/")},i=()=>{u("/gallery")},p=s=>{const r={};return s===1&&((!t.customer_name||t.customer_name.length<2)&&(r.customer_name="Name must be at least 2 characters"),(!t.email||!/\S+@\S+\.\S+/.test(t.email))&&(r.email="Invalid email address"),(!t.mobile||t.mobile.length<10)&&(r.mobile="Mobile number must be at least 10 digits"),(!t.address||t.address.length<10)&&(r.address="Address must be at least 10 characters")),s===2&&(t.destination_id||(r.destination_id="Please select a destination"),t.service_id||(r.service_id="Please select a service"),t.booking_date||(r.booking_date="Please select a date"),t.seats_selected<1&&(r.seats_selected="At least 1 seat must be selected")),N(r),Object.keys(r).length===0},w=()=>{p(d)&&v(s=>s+1)},M=()=>{v(s=>s-1)},E=async()=>{if(p(2))try{const s=await A("bookings",t);o(r=>({...r,id:s.id})),b(!0)}catch(s){console.error("Booking submission error:",s),alert("Failed to submit booking. Please try again.")}},R=async s=>{try{if(!s.paymentValidated){alert("Payment validation failed. Please try again.");return}await k("bookings",t.id,{payment_status:"paid",payment_method:s.method,transaction_id:s.transactionId,payment_proof_url:s.paymentProof,total_amount:t.total_amount,seats_selected:t.seats_selected,customer_name:t.customer_name,email:t.email,mobile:t.mobile,address:t.address,destination_id:t.destination_id,service_id:t.service_id,booking_date:t.booking_date,details:t.details}),o(r=>({...r,payment_status:"paid",payment_method:s.method,transaction_id:s.transactionId,total_amount:t.total_amount,seats_selected:t.seats_selected})),b(!1),a(!0),s.paymentValidated&&S(!0),console.log("Sending confirmation email to:",t.email)}catch(r){console.error("Payment update error:",r),alert("Failed to process payment. Please contact support.")}},U=s=>{var r;return((r=l.find(B=>B.id===s))==null?void 0:r.name)||"Unknown"},$=s=>{var r;return((r=f.find(B=>B.id===s))==null?void 0:r.name)||"Unknown"},z=()=>e.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${d>=s?"bg-orange-500 text-white":"bg-gray-200 text-gray-600"}`,children:c&&s===4?e.jsx(O,{className:"w-5 h-5"}):s}),s<4&&e.jsx("div",{className:`w-16 h-1 mx-2 ${d>s?"bg-orange-500":"bg-gray-200"}`})]},s))}),q=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:t.customer_name,onChange:s=>o(r=>({...r,customer_name:s.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your full name"}),x.customer_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.customer_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:t.email,onChange:s=>o(r=>({...r,email:s.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your email"}),x.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number *"}),e.jsx("input",{type:"tel",value:t.mobile,onChange:s=>o(r=>({...r,mobile:s.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"+91 1234567890"}),x.mobile&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo (Optional)"}),e.jsx(Z,{onImageUpload:s=>o(r=>({...r,customer_image_url:s})),maxSize:20,className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),e.jsx("textarea",{value:t.address,onChange:s=>o(r=>({...r,address:s.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your complete address"}),x.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.address})]})]}),ee=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2 font-poppins",children:"Enhance Your Trip"}),e.jsx("p",{className:"text-gray-600 font-inter",children:"Add extra services and experiences to make your journey unforgettable"})]}),e.jsx(Pe,{onAddOnsChange:n,selectedDestination:U(t.destination_id)}),y.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-4 font-poppins",children:"Selected Add-ons Summary"}),e.jsx("div",{className:"space-y-2",children:y.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:"🎁"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800 font-inter",children:s.addon.name}),e.jsxs("div",{className:"text-sm text-gray-500 font-inter",children:[s.quantity," × ₹",s.addon.price.toLocaleString()]})]})]}),e.jsxs("div",{className:"font-bold text-orange-500 font-poppins",children:["₹",s.totalPrice.toLocaleString()]})]},s.addon.id))}),e.jsx("div",{className:"border-t border-orange-200 mt-4 pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800 font-inter",children:"Total Add-ons:"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-500 font-poppins",children:["₹",t.addons_total.toLocaleString()]})]})})]})]}),se=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Booking Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination *"}),e.jsxs("select",{value:t.destination_id,onChange:s=>o(r=>({...r,destination_id:s.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Destination"}),l.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (₹",s.price.toLocaleString(),")"]},s.id))]}),x.destination_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.destination_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service *"}),e.jsxs("select",{value:t.service_id,onChange:s=>o(r=>({...r,service_id:s.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Service"}),f.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (₹",s.price.toLocaleString(),")"]},s.id))]}),x.service_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.service_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Travel Date *"}),e.jsx("input",{type:"date",value:t.booking_date,onChange:s=>o(r=>({...r,booking_date:s.target.value})),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),x.booking_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.booking_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Travelers *"}),e.jsx("select",{value:t.seats_selected,onChange:s=>o(r=>({...r,seats_selected:parseInt(s.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs("option",{value:s,children:[s," ",s===1?"Person":"People"]},s))}),x.seats_selected&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.seats_selected})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requests"}),e.jsx("textarea",{value:t.details,onChange:s=>o(r=>({...r,details:s.target.value})),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Any special requests or additional information..."})]})]}),te=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Booking Summary"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"Customer Details"}),e.jsx("p",{className:"text-gray-600",children:t.customer_name}),e.jsx("p",{className:"text-gray-600",children:t.email}),e.jsx("p",{className:"text-gray-600",children:t.mobile})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"Travel Details"}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx(he,{className:"w-4 h-4 inline mr-1"}),U(t.destination_id)]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx(pe,{className:"w-4 h-4 inline mr-1"}),t.booking_date]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx(fe,{className:"w-4 h-4 inline mr-1"}),t.seats_selected," ",t.seats_selected===1?"Person":"People"]})]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Base Package:"}),e.jsxs("span",{className:"text-gray-600",children:["₹",t.base_amount.toLocaleString()]})]}),y.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Add-ons:"}),e.jsxs("span",{className:"text-gray-600",children:["₹",t.addons_total.toLocaleString()]})]}),y.map(s=>e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 ml-4",children:[e.jsxs("span",{children:["• ",s.addon.name," (",s.quantity,"×)"]}),e.jsxs("span",{children:["₹",s.totalPrice.toLocaleString()]})]},s.addon.id))]}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{className:"text-teal-600",children:["₹",t.total_amount.toLocaleString()]})]})})]})})]})]});return h&&c?e.jsx(je,{bookingData:t,destinationName:U(t.destination_id),serviceName:$(t.service_id),selectedAddOns:y,onClose:C,onNavigateToHome:I,onNavigateToGallery:i}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[e.jsx("div",{className:"container mx-auto px-6 py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Secure Booking System"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Complete your travel booking in 3 easy steps"})]}),z(),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[d===1&&q(),d===2&&se(),d===3&&ee(),d===4&&te(),e.jsxs("div",{className:"flex justify-between mt-8",children:[d>1&&e.jsx("button",{onClick:M,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Previous"}),e.jsx("div",{className:"ml-auto",children:d<4?e.jsx("button",{onClick:w,className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Next"}):e.jsxs("button",{onClick:E,disabled:T,className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[T?e.jsx(X,{size:"sm"}):e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{children:"Proceed to Payment"})]})})]})]})]})}),P&&e.jsx(we,{bookingData:t,onSuccess:R,onCancel:()=>b(!1)})]})},Ee=()=>{var j,u;const m=Ne();return e.jsx(Se,{preSelectedDestination:(j=m.state)==null?void 0:j.selectedDestination,preSelectedService:(u=m.state)==null?void 0:u.selectedService})};export{Ee as default};
